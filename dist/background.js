let token="";chrome.action.disable();let contextMenu={id:"Weje",title:"Weje Clipper",contexts:["all"]};function generatePostData(e){const n={};e.mediaType&&"image"==e.mediaType?n.content=getBase64Image(e.srcUrl):e.selectionText&&(n.content=e.selectionText),n.token=token,console.log(n)}function getBase64Image(e){return"imageUrl"}chrome.contextMenus.onClicked.addListener((function(e){generatePostData(e),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,"message",(function(){console.log("sent")}))}))})),chrome.runtime.onMessage.addListener((function(e,n,t){console.log(e),"hello"===e.greeting&&t({farewell:"goodbye"})})),chrome.runtime.onMessageExternal.addListener((function(e,n,t){return e&&(e.message?"version"==e.message&&t({version:chrome.runtime.getManifest().version}):e.token&&(console.log("TOKEN",e.token),token=e.token,chrome.action.enable(),chrome.contextMenus.create(contextMenu),t({message:"Token has been recieved"}))),!0}));
{"version":3,"file":"content.js","mappings":";;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAOA;AAEA;AAeA;AAKA;AACA;AACA;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;ACxCA;AACA;AAEA;AACA;AACA;AAGA;AAEA;AACA;;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AAIA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;AC/CA;;AAEA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;;;;;;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AACA;AACA;AAEA;AACA;;AACA;AACA;AACA;;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAEA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;;AACA;AACA;AACA;AACA;AACA;;AACA;AAKA;AACA;AACA;;AAEA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./alert.js","webpack:///./pinner.js","webpack:///./utils.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./content.js"],"sourcesContent":["let alert = document.createElement(\"div\");\r\nlet content = document.createElement(\"div\");\r\nlet text = document.createElement(\"p\");\r\n\r\nconst svg = `\r\n<svg width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path d=\"M10 4.5H5.5C4.39543 4.5 3.5 5.39543 3.5 6.5V16C3.5 17.1046 4.39543 18 5.5 18H15.5C16.6046 18 17.5 17.1046 17.5 16V11.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n<path d=\"M11.5303 11.5303C11.2374 11.8232 10.7626 11.8232 10.4697 11.5303C10.1768 11.2374 10.1768 10.7626 10.4697 10.4697L11.5303 11.5303ZM18.9999 3.00006L19 2.25006C19.4142 2.25007 19.7499 2.58585 19.7499 3.00006L18.9999 3.00006ZM19.7499 7.00031C19.7499 7.41452 19.4142 7.7503 18.9999 7.7503C18.5857 7.7503 18.2499 7.41452 18.2499 7.0003L19.7499 7.00031ZM15 3.74994C14.5858 3.74993 14.25 3.41413 14.2501 2.99992C14.2501 2.5857 14.5859 2.24993 15.0001 2.24994L15 3.74994ZM10.4697 10.4697L18.4696 2.46973L19.5303 3.53039L11.5303 11.5303L10.4697 10.4697ZM19.7499 3.00006L19.7499 7.00031L18.2499 7.0003L18.2499 3.00006L19.7499 3.00006ZM18.9999 3.75006L15 3.74994L15.0001 2.24994L19 2.25006L18.9999 3.75006Z\" fill=\"white\"/>\r\n</svg>\r\n`;\r\n\r\nalert.id = \"wejeAlert\";\r\n\r\nalert.style = `display: none !important;\r\n  position: fixed !important;\r\n  left: 0 !important;\r\n  right: 0 !important;\r\n  top: 17px !important;\r\n  margin: auto !important;\r\n  z-index: 100 !important;\r\n  width: 220px !important;\r\n  font-size: 15px !important;\r\n  height: 60px !important;\r\n  justify-content: center !important;\r\n  border-radius: 20px !important;\r\n  color: white !important;\r\n  background-color: #4881FF !important`;\r\n\r\ncontent.style = `display: flex !important;\r\n  gap: 10px !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;`;\r\n\r\ntext.innerText = \"Content sent\";\r\ncontent.innerHTML = svg;\r\ncontent.append(text);\r\nalert.append(content);\r\n\r\ndocument.body.append(alert);\r\n\r\nexport default alert;\r\n","export const pinner = document.createElement(\"div\");\r\npinner.innerHTML =\r\n  '<svg class=\"clipper\" width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> <rect class=\"clipper\" width=\"22\" height=\"22\" rx=\"5\" fill=\"black\"/> <path class=\"clipper\" d=\"M12.7393 15V15.75C13.0656 15.75 13.3544 15.5391 13.4537 15.2284L12.7393 15ZM9.42036 15L8.71933 15.2665C8.82999 15.5576 9.10898 15.75 9.42036 15.75V15ZM8.89757 13.625L9.5986 13.3585L9.50318 13.1075L9.27015 12.9741L8.89757 13.625ZM13.1789 13.625L12.8013 12.9769L12.5523 13.1221L12.4645 13.3966L13.1789 13.625ZM12.7393 14.25H9.42036V15.75H12.7393V14.25ZM10.1214 14.7335L9.5986 13.3585L8.19653 13.8915L8.71933 15.2665L10.1214 14.7335ZM9.27015 12.9741C7.1587 11.7655 6.46928 9.69082 6.84933 7.94038C7.22695 6.20112 8.66121 4.75 10.9831 4.75V3.25C7.9121 3.25 5.90146 5.23638 5.38348 7.62212C4.86793 9.99668 5.83221 12.7345 8.52498 14.2759L9.27015 12.9741ZM10.9831 4.75C13.3053 4.75 14.7488 6.20208 15.1419 7.94616C15.5377 9.70185 14.868 11.773 12.8013 12.9769L13.5564 14.2731C16.2103 12.727 17.1393 9.98565 16.6052 7.61634C16.0686 5.23542 14.054 3.25 10.9831 3.25V4.75ZM12.4645 13.3966L12.0249 14.7716L13.4537 15.2284L13.8933 13.8534L12.4645 13.3966Z\" fill=\"white\"/> <path class=\"clipper\" d=\"M10 18H12\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg>';\r\npinner.id = \"wejePinner\";\r\npinner.classList.add(\"clipper\");\r\npinner.style =\r\n  \"position: absolute; top: -50px; left: 10px; z-index: 9999999; cursor: pointer; display: none; width: 32px; height: 32px;\";\r\n\r\nlet interval = null;\r\n\r\nexport function setPinnerCoords(selection, type) {\r\n  clearInterval(interval);\r\n  if (!selection && type === \"EMPTY\") {\r\n    pinner.style.top = -50 + \"px\";\r\n    pinner.style.left = 0;\r\n  } else if (selection && type === \"IMAGE\" && selection.width > 100) {\r\n    pinner.style.top =\r\n      selection.getBoundingClientRect().y + window.scrollY + 10 + \"px\";\r\n    pinner.style.left = selection.getBoundingClientRect().x + 10 + \"px\";\r\n  } else {\r\n    pinner.style.top =\r\n      selection.getRangeAt(0).getBoundingClientRect().y + window.scrollY + \"px\";\r\n    pinner.style.left =\r\n      selection.getRangeAt(0).getBoundingClientRect().x <= 20\r\n        ? 5\r\n        : selection.getRangeAt(0).getBoundingClientRect().x - 35 + \"px\";\r\n    interval = setInterval(function () {\r\n      pinner.style.top =\r\n        selection.getRangeAt(0).getBoundingClientRect().y +\r\n        window.scrollY +\r\n        \"px\";\r\n      pinner.style.left =\r\n        selection.getRangeAt(0).getBoundingClientRect().x <= 20\r\n          ? 5\r\n          : selection.getRangeAt(0).getBoundingClientRect().x - 35 + \"px\";\r\n    }, 500);\r\n  }\r\n}\r\n\r\nexport function togglePinner(pinnerStatus) {\r\n  if (pinnerStatus.text || pinnerStatus.image) {\r\n    pinner.style.display = \"block\";\r\n  } else {\r\n    pinner.style.display = \"none\";\r\n  }\r\n}\r\n\r\ndocument.body.append(pinner);\r\n","import alert from \"./alert\";\r\n\r\nfunction getBase64Image(url, callback) {\r\n  var xhr;\r\n  xhr = new XMLHttpRequest();\r\n  xhr.onload = function () {\r\n    var reader;\r\n    reader = new FileReader();\r\n    reader.onloadend = function () {\r\n      callback(reader.result);\r\n    };\r\n    reader.readAsDataURL(xhr.response);\r\n  };\r\n  xhr.open(\"GET\", url);\r\n  xhr.responseType = \"blob\";\r\n  xhr.send();\r\n}\r\n\r\nfunction createHTMLItem(clientData, node) {\r\n  var item;\r\n  item = {};\r\n  item.type = \"html\";\r\n  item.html = node.outerHTML;\r\n  item.text = node.innerText;\r\n  return item;\r\n}\r\n\r\nfunction createImageItem(url) {\r\n  return new Promise(function (res, rej) {\r\n    return getBase64Image(url, function (path) {\r\n      var item;\r\n      item = {};\r\n      item.type = \"image\";\r\n      item.base64 = path;\r\n      item.url = url;\r\n      res(item);\r\n    });\r\n  });\r\n}\r\n\r\nfunction createURLItem(clientData, node) {\r\n  var item, url;\r\n  item = {};\r\n  url = node.linkUrl === \"current\" ? window.location.href : node.linkUrl;\r\n  item.type = \"link\";\r\n  item.url = url;\r\n  return item;\r\n}\r\n\r\nexport function createPostData(clientData, nodeList) {\r\n  var items, postData;\r\n  postData = {\r\n    data: [],\r\n  };\r\n  items = [];\r\n  postData.uid = clientData.uid;\r\n  postData.apiKey = clientData.apiKey;\r\n  postData.source = window.location.href;\r\n  nodeList.forEach(function (el, idx) {\r\n    var item, url;\r\n    if (el.nodeName === \"IMG\" || el.srcUrl) {\r\n      url = el.srcUrl ? el.srcUrl : el.src;\r\n      item = createImageItem(url);\r\n      items.push(item);\r\n    } else if (el.nodeName !== \"IMG\" && !el.linkUrl) {\r\n      item = new Promise(function (res, rej) {\r\n        res(createHTMLItem(clientData, el));\r\n      });\r\n      items.push(item);\r\n    } else if (el.linkUrl) {\r\n      item = createURLItem(clientData, el);\r\n      postData.data.push(item);\r\n      setPostData(postData);\r\n    }\r\n  });\r\n  Promise.all(items).then(function (values) {\r\n    if (values.length) {\r\n      values.forEach(function (el) {\r\n        return postData.data.push(el);\r\n      });\r\n      setPostData(postData);\r\n    }\r\n  });\r\n}\r\n\r\nexport function setPostData(content) {\r\n  chrome.runtime.sendMessage({\r\n    content: content,\r\n  });\r\n  alert.style.display = \"flex\";\r\n  setTimeout(function () {\r\n    alert.style.display = \"none\";\r\n  }, 3000);\r\n}\r\n\r\nexport function findImageNode(nodeList, clientData) {\r\n  var elements, filteredList, isImageFound, list, wrapper;\r\n  list = Array.from(nodeList.children).slice();\r\n  isImageFound = false;\r\n  filteredList = [];\r\n  elements = [];\r\n  list.forEach(function (el) {\r\n    if (el.querySelector(\"img\")) {\r\n      return (isImageFound = true);\r\n    }\r\n  });\r\n  if (isImageFound) {\r\n    list.forEach(function (node) {\r\n      var wrapper;\r\n      if (node.querySelector(\"img\")) {\r\n        wrapper = document.createElement(\"div\");\r\n        if (elements.length) {\r\n          elements.forEach(function (el) {\r\n            return wrapper.append(el);\r\n          });\r\n        }\r\n        filteredList.push(wrapper);\r\n        elements = [];\r\n        filteredList.push(node.querySelector(\"img\"));\r\n        return (isImageFound = true);\r\n      } else {\r\n        return elements.push(node);\r\n      }\r\n    });\r\n    if (elements.length) {\r\n      wrapper = document.createElement(\"div\");\r\n      if (elements.length) {\r\n        elements.forEach(function (node) {\r\n          return wrapper.append(node);\r\n        });\r\n      }\r\n      filteredList.push(wrapper);\r\n    }\r\n    createPostData(clientData, filteredList);\r\n  } else {\r\n    return false;\r\n  }\r\n  return isImageFound;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { pinner, setPinnerCoords, togglePinner } from \"./pinner.js\";\r\nimport { createPostData, findImageNode } from \"./utils.js\";\r\nimport \"./alert.js\";\r\n\r\nvar s = document.createElement(\"script\");\r\ns.src = chrome.runtime.getURL(\"injected.js\");\r\ns.onload = function () {\r\n  this.remove();\r\n};\r\ndocument.head.append(s);\r\n\r\nlet selectedElement = null;\r\nlet selection = null;\r\nlet clientData = null;\r\nlet isImageFound = false;\r\n\r\nconsole.log(\"DEVEL\");\r\n\r\nchrome.runtime.sendMessage(\"getPinnerStatus\");\r\nchrome.runtime.sendMessage(\"getExtesionId\");\r\n\r\nchrome.runtime.onMessage.addListener(function (message) {\r\n  var node, pinnerStatus;\r\n\r\n  if (message.clientData) {\r\n    clientData = message.clientData;\r\n  }\r\n\r\n  if (message.id) {\r\n    setTimeout(() => {\r\n      document.dispatchEvent(\r\n        new CustomEvent(\"getExtensionId\", { detail: message.id })\r\n      );\r\n    }, 1000);\r\n  }\r\n\r\n  if (message.pinnerStatus) {\r\n    pinnerStatus = message.pinnerStatus;\r\n    togglePinner(message.pinnerStatus);\r\n    document.onmouseup = function () {\r\n      if (selectedElement) {\r\n        return Array.from(selectedElement.children).forEach(function (el) {\r\n          if (el.querySelector(\"img\")) {\r\n            isImageFound = true;\r\n          }\r\n        });\r\n      }\r\n    };\r\n    if (pinnerStatus.image) {\r\n      document.addEventListener(\"mousemove\", showImagePinner);\r\n    } else {\r\n      document.removeEventListener(\"mousemove\", showImagePinner);\r\n    }\r\n    if (pinnerStatus.text) {\r\n      document.addEventListener(\"selectionchange\", showTextPinner);\r\n    } else {\r\n      document.removeEventListener(\"selectionchange\", showTextPinner);\r\n    }\r\n  }\r\n  if (message.target && message.target.linkUrl) {\r\n    node = message.target;\r\n    createPostData(clientData, [node]);\r\n    return;\r\n  }\r\n  if (message.target) {\r\n    node = message.target;\r\n    if (!findImageNode(selectedElement, clientData)) {\r\n      if (node && node.mediaType === \"image\") {\r\n        createPostData(clientData, [node]);\r\n      } else if (node && node.selectionText) {\r\n        createPostData(clientData, [selectedElement]);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nfunction showTextPinner() {\r\n  var c, i;\r\n  selection = document.getSelection();\r\n  if (!selection.isCollapsed) {\r\n    selectedElement = document.createElement(\"div\");\r\n    i = 0;\r\n    while (i < selection.rangeCount) {\r\n      selectedElement.append(selection.getRangeAt(i).cloneContents());\r\n      i++;\r\n    }\r\n    c = 0;\r\n    while (c < selectedElement.children.length) {\r\n      selectedElement.children[c].removeAttribute(\"class\");\r\n      c++;\r\n    }\r\n    setPinnerCoords(selection, \"HTML\");\r\n  } else {\r\n    setPinnerCoords(null, \"EMPTY\");\r\n    selectedElement = null;\r\n    selection = null;\r\n    isImageFound = false;\r\n  }\r\n}\r\n\r\nfunction showImagePinner(e) {\r\n  if (e.target.nodeName === \"IMG\") {\r\n    if (!isImageFound) {\r\n      selectedElement = e.target;\r\n      setPinnerCoords(e.target, \"IMAGE\");\r\n    } else {\r\n      setPinnerCoords(e.target, \"IMAGE\");\r\n    }\r\n  } else if (\r\n    !e.target.classList.contains(\"clipper\") &&\r\n    selectedElement &&\r\n    selectedElement.nodeName === \"IMG\"\r\n  ) {\r\n    setPinnerCoords(null, \"EMPTY\");\r\n    if (selection) {\r\n      selectedElement = document.createElement(\"div\");\r\n      selectedElement.append(selection.getRangeAt(0).cloneContents());\r\n    }\r\n  }\r\n  if (\r\n    !e.target.classList.contains(\"clipper\") &&\r\n    selectedElement &&\r\n    selectedElement.nodeName !== \"IMG\"\r\n  ) {\r\n    setPinnerCoords(selection, \"HTML\");\r\n  }\r\n}\r\n\r\npinner.onmousedown = function () {\r\n  var node;\r\n  if (!findImageNode(selectedElement, clientData)) {\r\n    node = selectedElement;\r\n    if (selectedElement.nodeName === \"IMG\") {\r\n      createPostData(clientData, [node]);\r\n    } else {\r\n      createPostData(clientData, [node]);\r\n    }\r\n  }\r\n};\r\n"],"names":[],"sourceRoot":""}
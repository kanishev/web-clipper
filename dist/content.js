function getBase64Image(e,t){var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.open("GET",e),n.responseType="blob",n.send()}function setPostData(e){console.log(e)}chrome.runtime.sendMessage("v",(function(e){console.log(e)})),chrome.runtime.onMessage.addListener((function(e){if(console.log("Message",e),e.target.mediaType&&"image"==e.target.mediaType)getBase64Image(e.target.srcUrl,(t=>{const n={data:[]},o={};n.token=e.token,o.type="image",o.base64=t,o.url=e.target.srcUrl,n.data.push(o),setPostData(n)}));else if(e.target.selectionText){const t={data:[]},n={};t.token=e.token,n.type="html",n.html=selectedElement.innerHTML,n.text=selectedElement.innerText,t.data.push(n),setPostData(t)}})),document.onselectionchange=function(){const e=document.getSelection();selectedElement=document.createElement("div");for(let t=0;t<e.rangeCount;t++)selectedElement.append(e.getRangeAt(t).cloneContents()),e.getRangeAt(t).cloneContents();for(let e=0;e<selectedElement.children.length;e++)selectedElement.children[e].removeAttribute("class")};const el=document.createElement("div");el.classList.add("my-class"),el.style="position: absolute;top: 10px;left: 10px;width: 10px;height: 10px;background: brown;z-index: 10000;cursor: pointer;",document.body.append(el);
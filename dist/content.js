!function(){"use strict";var e={488:function(e,t,n){n.d(t,{FX:function(){return a},$c:function(){return s},k$:function(){return i}});var o=n(523),r=document.createElement("div");function a(e,t){e&&e.isCollapsed&&"HTML"==t?(r.style.top=0,r.style.left=0):"IMAGE"==t?(r.style.top=e.target.offsetTop+10+"px",r.style.left=e.target.offsetLeft+10+"px"):(r.style.top=e.anchorNode.parentNode.offsetTop-15+"px",r.style.left=e.anchorNode.parentNode.offsetLeft-20+"px")}function s(e){var t=e.text,n=e.image;r.style.display=t||n?"block":"none"}function i(e,t,n){if("IMG"==e.nodeName)(0,o.s)(t.src,(function(e){var r={data:[]};r.token=n;var a={type:"image"};a.base64=e,a.url=t.src,r.data.push(a),(0,o.a)(r)}));else{var r={data:[]};r.token=n;var a={type:"html"};a.html=t.outerHTML,a.text=t.innerText,r.data.push(a),(0,o.a)(r)}}r.classList.add("my-class"),r.id="wejePinner",r.style="position: absolute;top: -10px;left: 10px;width: 20px;height: 20px;background: blue;border-radius:50%; z-index: 10000;cursor: pointer; display:none",document.body.append(r)},523:function(e,t,n){function o(e,t){var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.open("GET",e),n.responseType="blob",n.send()}function r(e){console.log("ccc",e),console.log(chrome)}n.d(t,{s:function(){return o},a:function(){return r}})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=n(488),t=n(523),o=null;function r(){var t=document.getSelection();if(!t.isCollapsed){o=document.createElement("div");for(var n=0;n<t.rangeCount;n++)o.append(t.getRangeAt(n).cloneContents()),t.getRangeAt(n).cloneContents();for(var r=0;r<o.children.length;r++)o.children[r].removeAttribute("class")}"wejePinner"==t.anchorNode.id&&chrome.runtime.sendMessage("getToken",(function(t){(0,e.k$)(o,o,t)})),(0,e.FX)(t,"HTML")}function a(t){"IMG"==t.target.nodeName&&(o=t.target,(0,e.FX)(t,"IMAGE"))}chrome.runtime.sendMessage("getPinnerStatus"),chrome.runtime.onMessage.addListener((function(n){if(n.pinnerStatus){var s=n.pinnerStatus,i=s.text,c=s.image;(0,e.$c)(n.pinnerStatus),c?document.addEventListener("mousemove",a):document.removeEventListener("mousemove",a),i?document.addEventListener("selectionchange",r):document.removeEventListener("selectionchange",r)}if(n.target&&"image"==n.target.mediaType)(0,t.s)(n.target.srcUrl,(function(e){var o={data:[]};o.token=n.token;var r={type:"image"};r.base64=e,r.url=n.target.srcUrl,o.data.push(r),(0,t.a)(o)}));else if(n.target&&n.target.selectionText){var u={data:[]},d={};u.token=n.token,d.type="html",d.html=o.outerHTML,d.text=o.innerText,u.data.push(d),(0,t.a)(u)}}))}()}();